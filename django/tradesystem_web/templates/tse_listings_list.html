{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>æ±è¨¼ä¸Šå ´éŠ˜æŸ„ä¸€è¦§</title>
    <link rel="stylesheet" href="{% static 'base.css' %}?v=20260214-4">
    <link rel="stylesheet" href="{% static 'tse_listings_list.css' %}?v=20260214-2">
</head>
<body>
    <h1>æ±è¨¼ä¸Šå ´éŠ˜æŸ„ä¸€è¦§</h1>
    <div class="pagination">
        <a class="button" href="{% url 'rankings_ma_estimate' %}">ç§»å‹•å¹³å‡ æ¨æ¸¬é¨°è½ç‡ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
        <a class="button" href="{% url 'rankings_rsi' %}">RSIåˆ†æçµæœãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
        <a class="button" href="{% url 'rankings_arima_forecast_rate' %}">ARIMAäºˆæ¸¬ é¨°è½ç‡ãƒ©ãƒ³ã‚­ãƒ³ã‚°</a>
        <a class="button" href="{% url 'results_arima_forecast' %}">ARIMAäºˆæ¸¬çµæœä¸€è¦§</a>
    </div>
    <form method="get" class="filters">
        <label for="code">ã‚³ãƒ¼ãƒ‰</label>
        <input id="code" name="code" type="text" value="{{ selected_code }}" placeholder="ä¾‹: 7203">
        <label for="market">å¸‚å ´ãƒ»å•†å“åŒºåˆ†</label>
        <select id="market" name="market">
            <option value="">ã™ã¹ã¦</option>
            {% for market in markets %}
                <option value="{{ market }}" {% if market == selected_market %}selected{% endif %}>{{ market }}</option>
            {% endfor %}
        </select>
        <label for="sector33">33æ¥­ç¨®</label>
        <select id="sector33" name="sector33">
            <option value="">ã™ã¹ã¦</option>
            {% for sector33 in sector33_names %}
                <option value="{{ sector33 }}" {% if sector33 == selected_sector33 %}selected{% endif %}>{{ sector33 }}</option>
            {% endfor %}
        </select>
        <button type="submit">æ¤œç´¢</button>
    </form>
    <div class="meta">ä»¶æ•°: {{ page_obj.paginator.count }} ({{ page_obj.number }} / {{ page_obj.paginator.num_pages }}ãƒšãƒ¼ã‚¸)</div>
    <table>
        <thead>
            <tr>
                <th>ã‚³ãƒ¼ãƒ‰</th>
                <th>éŠ˜æŸ„å</th>
                <th>å¸‚å ´ãƒ»å•†å“åŒºåˆ†</th>
                <th>33æ¥­ç¨®</th>
                <th>æ“ä½œ</th>
            </tr>
        </thead>
        <tbody>
            {% for item in listings %}
            <tr>
                <td>{{ item.code }}</td>
                <td>{{ item.name }}</td>
                <td>{{ item.market }}</td>
                <td>{{ item.sector33_code }} - {{ item.sector33_name }}</td>
                <td>
                    <a class="action-link" href="{% url 'stock_price_chart' item.code %}">ğŸ“ˆ æ ªä¾¡</a>
                    /
                    <a class="action-link" href="{% url 'stock_rsi_chart' item.code %}">ğŸ“ˆ RSI</a>
                    /
                    <a class="button graph-button" href="{% url 'stock_arima_forecast_chart' item.code %}">ğŸ“ˆ ARIMA</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5">éŠ˜æŸ„ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="pagination">
        {% if page_obj.has_previous %}
            <a class="button" href="?page={{ page_obj.previous_page_number }}&code={{ selected_code }}&market={{ selected_market }}&sector33={{ selected_sector33 }}">å‰ãƒšãƒ¼ã‚¸</a>
        {% else %}
            <span class="button disabled">å‰ãƒšãƒ¼ã‚¸</span>
        {% endif %}
        {% if page_obj.has_next %}
            <a class="button" href="?page={{ page_obj.next_page_number }}&code={{ selected_code }}&market={{ selected_market }}&sector33={{ selected_sector33 }}">æ¬¡ãƒšãƒ¼ã‚¸</a>
        {% else %}
            <span class="button disabled">æ¬¡ãƒšãƒ¼ã‚¸</span>
        {% endif %}
    </div>
</body>
</html>

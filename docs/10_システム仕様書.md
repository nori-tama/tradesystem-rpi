# システム仕様書（テンプレート）

## 0. 文書情報
- 文書名:
- 版数:
- 作成日:
- 作成者:
- 承認者:
- 更新履歴:
  - yyyy-mm-dd: vX.Y / 変更概要 / 変更者

## 1. 目的
- 本システムの目的:
- 期待する効果:

## 1.1 プロトタイプ開発方針
- 採用理由:
- 期待する学習/検証:
- プロトタイプの位置付け（MVP/PoC/検証用など）:
- 完了/中止の判断基準:

## 2. 背景・課題
- 現状の課題:
- 解決したい問題:

## 3. 用語・略語
| 用語 | 説明 |
|---|---|
|  |  |

## 4. 対象範囲
- 対象業務:
- 対象外:
- 利用者区分:

## 5. 前提条件・制約
- 技術的前提:
- 法令/規格/社内ルール:
- 環境制約:

## 5.1 プロジェクト規約（DB）
- DDLは `ddl/` に配置し、テーブルは事前に作成する。
- DDLは既存テーブルがある場合に削除してから作成する。
- データベースを扱うスクリプトでの `CREATE TABLE` は禁止とする。
- DB接続情報は共通スクリプトでハードコーディングし、各スクリプトの引数や環境変数で受け取らない。

## 5.2 プロジェクト規約（ドキュメント）
- スクリプトの作成・修正に合わせて、システム仕様書の内容も都度更新する。
- スクリプト内のコメントは日本語で記載する。
- 必要なPythonパッケージがある場合は、[/docs/02_Pythonパッケージ導入.md](/docs/02_Pythonパッケージ導入.md) に導入手順をまとめる。
- Pythonの仮想環境は使用しない。

## 5.3 システム前提構成
- ハードウェア: Raspberry Pi 5 Model B
- OS:
  - PRETTY_NAME="Debian GNU/Linux 13 (trixie)"
  - NAME="Debian GNU/Linux"
  - VERSION_ID="13"
  - VERSION="13 (trixie)"

## 6. システム概要
- システム構成の概略:
- 主な機能一覧:

## 6.1 仮説と検証対象
| ID | 仮説 | 検証方法 | 成功基準 |
|---|---|---|---|
| H- |  |  |  |

## 6.2 イテレーション計画
| Iter | 期間 | 目的 | 成果物 |
|---|---|---|---|
| 1 |  |  |  |

## 7. ユースケース
| ID | 名称 | 概要 | 主アクター |
|---|---|---|---|
| UC- |  |  |  |

## 8. 要件定義（暫定）
### 8.1 機能要件
| ID | 機能 | 説明 | 優先度 |
|---|---|---|---|
| FR- |  |  |  |

### 8.2 非機能要件（暫定）
- 性能:
- 可用性:
- 信頼性:
- 拡張性:
- 保守性:
- 運用性:
- セキュリティ:
- 監査・ログ:
- バックアップ/リストア:

### 8.3 スコープ変更ルール
- 変更の判断基準:
- 合意の取り方:
- 記録方法:

## 9. 画面仕様（プロトタイプ）
### 9.1 画面一覧
| 画面ID | 画面名 | 説明 |
|---|---|---|
| UI- |  |  |

### 9.2 画面詳細（テンプレート）
- 画面ID:
- 画面名:
- 目的:
- 遷移元/遷移先:
- 入力項目:
- 入力制約:
- 表示項目:
- アクション:
- エラーメッセージ:

## 10. API仕様（プロトタイプ）
### 10.1 API一覧
| API ID | メソッド | パス | 説明 |
|---|---|---|---|
| API- |  |  |  |

### 10.2 API詳細（テンプレート）
- API ID:
- 目的:
- メソッド/パス:
- 認証:
- リクエスト:
- レスポンス:
- エラー:

## 11. データ仕様（暫定）
### 11.1 データモデル
- 概要:
- ER図: （図を添付）

### 11.2 テーブル定義
| テーブル名 | 説明 |
|---|---|
| tse_listings | 東証上場銘柄一覧（JPX） |

### 11.3 カラム定義（テンプレート）
| カラム名 | 型 | 制約 | 説明 |
|---|---|---|---|
| listing_date | DATE | NULL可 | データ基準日 |
| code | VARCHAR(8) | PK | 銘柄コード |
| name | VARCHAR(255) | NOT NULL | 銘柄名 |
| market | VARCHAR(255) | NOT NULL | 市場・商品区分 |
| sector33_code | VARCHAR(16) | NOT NULL | 33業種コード |
| sector33_name | VARCHAR(255) | NOT NULL | 33業種区分 |
| sector17_code | VARCHAR(16) | NOT NULL | 17業種コード |
| sector17_name | VARCHAR(255) | NOT NULL | 17業種区分 |
| scale_code | VARCHAR(16) | NOT NULL | 規模コード |
| scale_name | VARCHAR(255) | NOT NULL | 規模区分 |
| updated_at | TIMESTAMP | NOT NULL | 最終更新時刻 |

## 12. バッチ/ジョブ仕様（必要時）
| ジョブID | 名称 | スケジュール | 説明 |
|---|---|---|---|
| JOB- |  |  |  |

## 13. 外部連携
- 連携先:
- 方式:
- データ項目:
- エラー時の動作:

## 14. セキュリティ（暫定）
- 認証/認可:
- 役割/権限:
- データ保護:
- 脆弱性対策:

## 15. 運用・保守（暫定）
- 運用フロー:
- 監視項目:
- 障害対応:
- 定期メンテナンス:

## 16. 検証・テスト方針
- テスト範囲:
- テストレベル:
- 受入基準:

## 16.1 ユーザー評価/フィードバック
- 対象ユーザー:
- 収集方法:
- 反映ルール:

## 17. 移行計画（必要時）
- 旧システムからの移行内容:
- 移行手順:
- ロールバック:

## 18. リスク・課題
| ID | リスク/課題 | 対応策 | 担当 | 期限 |
|---|---|---|---|---|
| R- |  |  |  |  |

## 19. 添付資料
- 参考資料:
- 図表:

## 20. プロトタイプ評価結果（記録欄）
| 日付 | Iter | 検証内容 | 結果 | 次アクション |
|---|---|---|---|---|
|  |  |  |  |  |
